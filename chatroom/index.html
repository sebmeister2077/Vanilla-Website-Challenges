<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet" />
        <script
            src="https://code.jquery.com/jquery-3.7.0.min.js"
            integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
            crossorigin="anonymous"
        ></script>

        <script src="https://cdn.tailwindcss.com"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/Faker/3.1.0/faker.min.js" referrerpolicy="no-referrer"></script>
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.css"
            integrity="sha512-3pIirOrwegjM6erE5gPSwkUzO+3cTjpnV9lexlNZqvupR64iZBnOOTiiLPb9M36zpMScbmUNIcHUqKD47M719g=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
        <!-- Toastr needs the full jquery version (NOT SLIM) -->
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.js"
            integrity="sha512-lbwH47l/tPXJYG9AcFNoJaTMhGvYWhVM9YI43CT+uteTRRaiLCui8snIgyAN8XWgNjNhCqlAUdzZptso6OCoFQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>

        <title>Chat Room</title>
        <style>
            * {
                font-family: 'Roboto', sans-serif;
            }
            body {
                font-family: Roboto Slab;
            }

            .cursor-svg {
                position: fixed;
                top: 0px;
                left: 0px;
                will-change: translate, opacity, transform;
                transition: translate 0.6s cubic-bezier(0, 0, 0, 1.1), transform 0.5s;
                translate: -100px -100px;
                opacity: 0;
                stroke-dashoffset: 210;
                stroke-dasharray: 210;
                animation: draw 2s 1s 1 forwards;
            }
            .show-cursor {
                stroke-dashoffset: 0;
            }
            @keyframes draw {
                from {
                    stroke-dashoffset: 210;
                }
                to {
                    stroke-dashoffset: 0;
                }
            }
            .cube {
                transform: scale(0);
                transform-style: preserve-3d;
                --transform-amount: calc(0.5 * var(--cube-vertice));
                width: var(--cube-vertice);
                position: relative;
                transition: transform 1.4s cubic-bezier(0, 0, 0, 1);
                will-change: transform;
            }
            .cube-glass {
                position: absolute;
                inset: 0px;
                z-index: 3;
            }
            .cube-face {
                box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.2);
                user-select: none;
                display: grid;
                place-items: center;
                position: absolute;
                top: 0px;
                left: 0px;
                width: 100%;
                border: 1px solid #ccc;
                background-color: hsla(0, 0%, 100%, 0.8);
                aspect-ratio: 1;
                opacity: 0.56;
                transition: background-color 0.8s ease-in-out;
                scale: 0;
                transform: none;
                animation: cube-animation 2.1s cubic-bezier(0.42, 0, 0.35, 1.25) 1s 1 forwards;
            }
            @keyframes cube-animation {
                from {
                    scale: 0;
                    transform: translate3d(0, 0, 0);
                }
                to {
                    scale: 1;
                }
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
        </style>
        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        backgroundImage: {
                            chat: 'linear-gradient(320deg, rgba(15,173,142,0.36) 0%, rgba(26,283,131,0.5) 100%)',
                            'chat-header': 'linear-gradient(2deg, rgba(135,223,144,0) 0%, rgba(26,213,65,0.32) 100%);',
                        },
                    },
                },
            }
            toastr.options = {
                newestOnTop: true,
                progressBar: true,
            }
        </script>
    </head>

    <body class="overflow-hidden cursor-none flex w-full h-screen select-none">
        <img
            src="https://wallpaperaccess.com/full/3787594.jpg"
            class="z-[-1] fixed inset-0 h-screen w-screen"
            alt="Generic background with a lighsource in the center"
        />
        <template id="cursor">
            <svg
                data-cursor
                class="cursor-svg"
                width="24px"
                height="24px"
                viewBox="0 0 24 24"
                fill="none"
                aria-label="Custom cursor"
                aria-live="off"
            >
                <g clip-path="url(#clip0_429_11096)">
                    <path
                        d="M11 20.9999L4 3.99994L21 10.9999L14.7353 13.6848C14.2633 13.8871 13.8872 14.2632 13.6849 14.7353L11 20.9999Z"
                        stroke-width="2.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    />
                </g>
                <defs>
                    <clipPath id="clip0_429_11096">
                        <rect width="24" height="24" fill="white" />
                    </clipPath>
                </defs>
            </svg>
        </template>
        <main class="flex items-stretch h-full grow w-full">
            <aside
                aria-label="Chat"
                id="chat"
                class="group/chat bg-chat z-30 shadow-2xl backdrop-blur-sm gap-4 flex flex-col h-full cursor-auto w-20 data-[open=true]:w-96 md:w-96 overflow-hidden transition-[width] duration-1000"
            >
                <header class="w-full p-5 bg-chat-header flex-col gap-2 flex justify-between">
                    <div class="flex flex-row-reverse gap-8 justify-between border-b border-slate-50/[.50]">
                        <div class="info w-max whitespace-nowrap order-2 text-neutral-800" aria-live="polite">Online friends:0/100</div>
                        <button
                            aria-label="Chat Menu"
                            aria-description="Open the Chat on smaller screens"
                            class="md:opacity-0 order-1 transition-opacity duration-500 md:pointer-events-none"
                            onclick="const chat = $('#chat');if(chat[0].hasAttribute('data-open')) chat.removeAttr('data-open').attr('aria-hidden','true'); else chat.attr('data-open','true').attr('aria-hidden','false');"
                        >
                            <svg class="fill-slate-50/[80] w-8 h-8" viewBox="0 0 24 24">
                                <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path>
                            </svg>
                        </button>
                    </div>
                    <h2
                        class="text-3xl opacity-0 md:[opacity:1_!important] group-data-[open=true]/chat:[opacity:1_!important] transform-opacity duration-500 w-full whitespace-nowrap min-w-[300px] text-neutral-800"
                    >
                        Chat Messages
                    </h2>
                </header>
                <section class="flex flex-col grow gap-2 p-3 overflow-hidden">
                    <article
                        aria-label="Chat messages"
                        id="messages"
                        class="flex flex-col grow gap-6 overflow-auto px-2 scroll-smooth scrollbar-hide"
                    >
                        <template id="message-template">
                            <div data-uid class="flex w-full gap-1 relative">
                                <div class="rounded-full shrink-0 overflow-hidden w-10 h-10 sticky top-0 relative shadow-sm">
                                    <img data-image class="w-full" loading="lazy" />
                                    <svg
                                        data-loading-image
                                        class="absolute z-10 fill-neutral-400 top-0 bg-neutral-200 p-2 w-full duration-500 transition-opacity"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            d="M18.39 14.56C16.71 13.7 14.53 13 12 13s-4.71.7-6.39 1.56C4.61 15.07 4 16.1 4 17.22V20h16v-2.78c0-1.12-.61-2.15-1.61-2.66zM9.78 12h4.44c1.21 0 2.14-1.06 1.98-2.26l-.32-2.45C15.57 5.39 13.92 4 12 4S8.43 5.39 8.12 7.29L7.8 9.74c-.16 1.2.77 2.26 1.98 2.26z"
                                        ></path>
                                    </svg>
                                </div>
                                <div
                                    data-messages
                                    class="flex flex-col grow gap-2 pr-2 text-neutral-800 items-start opacity-0 group-data-[open=true]/chat:[opacity:1_!important] md:[opacity:1_!important] transition-opacity duration-500"
                                >
                                    <span data-username class="text-sm w-fit"></span>
                                    <div data-message class="rounded-xl bg-neutral-50/[.85] relative px-4 py-2 shadow-md"></div>
                                </div>
                            </div>
                        </template>
                    </article>
                    <footer class="w-full flex justify-between items-center">
                        <form
                            id="message-form"
                            class="grow flex justify-between items-center px-2 py-2 relative opacity-0 group-data-[open=true]/chat:[opacity:1_!important] md:[opacity:1_!important] transition-opacity duration-500"
                        >
                            <input
                                placeholder="Type to chat..."
                                name="message"
                                type="text"
                                class="peer/message-input bg-neutral-50/[.85] text-neutral-800 shadow-md outline-0 w-full px-6 py-3 rounded-xl"
                            />
                            <button
                                aria-label="Send message"
                                type="submit"
                                class="peer-placeholder-shown/message-input:scale-0 absolute right-5 text-amber-400 hover:scale-110 focus:scale-110 transition-transform duration-300 outline-0"
                            >
                                <svg class="fill-current w-6 h-6" viewBox="0 0 24 24">
                                    <path d="M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"></path>
                                </svg>
                            </button>
                        </form>
                        <button
                            id="change-color"
                            class="hover:scale-110 focus:scale-110 transition-transform duration-300 outline-0"
                            title="Change color"
                        >
                            <img class="w-10 h-10" src="https://img.icons8.com/fluency/48/rgb-circle-2.png" alt="rgb circle 2" />
                        </button>
                    </footer>
                </section>
            </aside>
            <section class="flex items-center flex-col justify-center grow">
                <header data-online-users class="flex justify-end"></header>
                <section
                    cube-container
                    class="flex items-center justify-center grow w-full [perspective:200px] [perspective-origin:center] [--cube-vertice:150px]"
                >
                    <div class="cube-glass"></div>
                    <div class="cube">
                        <div
                            class="cube-face"
                            style="transform: translate3d(0px, calc(-1 * var(--transform-amount)), var(--transform-amount))"
                        ></div>
                        <div
                            class="cube-face"
                            style="transform: rotateY(90deg) translate3d(0px, calc(-1 * var(--transform-amount)), var(--transform-amount))"
                        ></div>
                        <div
                            class="cube-face"
                            style="transform: rotateY(90deg) rotateX(90deg) translate3d(0px, 0px, calc(2 * var(--transform-amount)))"
                        ></div>
                        <div
                            class="cube-face"
                            style="
                                transform: rotateY(180deg) rotateZ(90deg)
                                    translate3d(calc(-1 * var(--transform-amount)), 0px, var(--transform-amount));
                            "
                        ></div>
                        <div
                            class="cube-face"
                            style="
                                transform: rotateY(-90deg) rotateZ(90deg)
                                    translate3d(calc(-1 * var(--transform-amount)), 0px, var(--transform-amount));
                            "
                        ></div>
                        <div class="cube-face" style="transform: rotateX(-90deg) translateZ(0px)">Top</div>
                    </div>
                </section>
                <footer class="flex w-full justify-end z-10">
                    <a href="https://firebase.google.com" target="_blank">
                        <img src="./assets/firebaseLogo.svg" alt="Built with Firebase logo" loading="lazy" />
                    </a>
                </footer>
            </section>
        </main>
        <script type="module" defer src="./scripts/main.js"></script>
    </body>
</html>
