<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet" />
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/compressorjs/1.2.1/compressor.min.js"
            integrity="sha512-MgYeYFj8R3S6rvZHiJ1xA9cM/VDGcT4eRRFQwGA7qDP7NHbnWKNmAm28z0LVjOuUqjD0T9JxpDMdVqsZOSHaSA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <script
            src="https://code.jquery.com/jquery-3.6.4.slim.js"
            integrity="sha256-dWvV84T6BhzO4vG6gWhsWVKVoa4lVmLnpBOZh/CAHU4="
            crossorigin="anonymous"
        ></script>
        <script src="https://cdn.tailwindcss.com"></script>
        <title>Loading image</title>
        <script>
            tailwind.config = {
                theme: {
                    fontFamily: {
                        sans: ['"Roboto"', 'sans-serif'],
                    },
                },
            }
        </script>
    </head>

    <body class="bg-slate-950 text-stone-300 flex w-screen h-screen p-8">
        <section class="w-1/2 flex items-center justify-center">
            <noscript>This app requires javascript to run</noscript>
            <form>
                <label
                    tabindex="0"
                    for="file-input"
                    class="flex outline-current focus:bg-slate-600 hover:bg-slate-600 focus:outline-offset-[-12px] hover:outline-offset-[-12px] duration-300 items-center rounded-xl bg-slate-500 justify-center p-8 cursor-pointer w-28 h-28 outline-dashed outline-1 outline-offset-[-6px]"
                >
                    <svg class="fill-stone-300" viewBox="0 0 24 24">
                        <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"></path>
                    </svg>
                </label>
                <input id="file-input" type="file" accept="image/*" hidden />
            </form>
        </section>
        <section class="w-1/2 flex items-center justify-center">
            <img src="https://placehold.co/400x400" class="rounded-xl" />
            <script>
                const image = $('img')
                const newSrc = `${image.attr('src')}/${tailwind.colors.slate['500']}/${
                    tailwind.colors.stone[300]
                }?font=roboto`.replaceAll('#', '')
                image.attr('src', newSrc)
            </script>
        </section>
        <script>
            const input = $('#file-input')
            $("[for='file-input']").on('keydown', function (e) {
                if (e.key === 'Enter') input.click()
            })
            input.on('change', function (e) {
                const file = e.target.files?.[0]
                if (!file) return

                const url = URL.createObjectURL(file)
                $('img').attr('src', url)
                console.log(e)
            })
        </script>
    </body>
</html>
